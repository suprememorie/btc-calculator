<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <title>Jacky çš„ BTC è¤‡åˆ©è¨ˆç®—æ©Ÿ v1.3</title>
  <style>
    body { font-family: sans-serif; padding: 2em; background-color: #f5f5f5; }
    input, select { margin-bottom: 1em; padding: 0.5em; width: 260px; }
    button { padding: 0.6em 1em; }
    table { border-collapse: collapse; width: 100%; margin-top: 1em; background-color: #fff; }
    th, td { border: 1px solid #ccc; padding: 0.6em; text-align: right; }
    th { background-color: #eee; }
    h3 { margin-top: 2em; }
  </style>
</head>
<body>

  <h2>Jacky BTC è¤‡åˆ©è¨ˆç®—æ©Ÿ v1.3</h2>

  <label>åˆå§‹æœ¬é‡‘ï¼ˆNT$ï¼‰ï¼š</label><br>
  <input type="number" id="initial" value="10000"><br>

  <label>æ¯æœŸæŠ•å…¥é‡‘é¡ï¼ˆNT$ï¼‰ï¼š</label><br>
  <input type="number" id="dca" value="5000"><br>

  <label>åˆ©ç‡æ•¸å€¼ï¼š</label><br>
  <input type="number" id="rate" value="0.03">
  <select id="rateType">
    <option value="year">å¹´åˆ©ç‡</option>
    <option value="month">æœˆåˆ©ç‡</option>
    <option value="week">é€±åˆ©ç‡</option>
    <option value="day" selected>æ—¥åˆ©ç‡</option>
  </select><br>

  <label>æŠ•è³‡æœŸé–“ï¼š</label><br>
  <input type="number" id="duration" value="10">
  <select id="durationType">
    <option value="year" selected>å¹´</option>
    <option value="month">æœˆ</option>
    <option value="week">é€±</option>
    <option value="day">æ—¥</option>
  </select><br>

  <label>è¤‡åˆ©é€±æœŸï¼š</label><br>
  <select id="compoundType">
    <option value="year">å¹´è¤‡åˆ©</option>
    <option value="month">æœˆè¤‡åˆ©</option>
    <option value="week">é€±è¤‡åˆ©</option>
    <option value="day" selected>æ—¥è¤‡åˆ©</option>
  </select><br>

  <label>æ¯”ç‰¹å¹£åƒ¹æ ¼ï¼ˆUSDï¼‰ï¼š</label><br>
  <input type="number" id="btcPriceUSD" value="60000"><br>

  <button onclick="calculate()">ğŸ§® é–‹å§‹è¨ˆç®—</button>

  <h3>ğŸ“Š æŠ•è³‡æˆé•·çµæœ</h3>
  <div id="summary"></div>
  <div id="table"></div>

  <script>
    function getFactor(unit) {
      return { year: 1, month: 12, week: 52, day: 365 }[unit];
    }

    function format(n) {
      return n.toLocaleString(undefined, { maximumFractionDigits: 2 });
    }

    function calculate() {
      const initial = parseFloat(document.getElementById("initial").value) || 0;
      const dca = parseFloat(document.getElementById("dca").value) || 0;
      const rawRate = parseFloat(document.getElementById("rate").value) / 100;
      const rateType = document.getElementById("rateType").value;
      const duration = parseFloat(document.getElementById("duration").value);
      const durationType = document.getElementById("durationType").value;
      const compoundType = document.getElementById("compoundType").value;
      const btcUSD = parseFloat(document.getElementById("btcPriceUSD").value) || 60000;
      const usdToTwd = 30; // ç¾é‡‘æ›ç®—å°å¹£

      const ratePerCompound = Math.pow(1 + rawRate, 1 / getFactor(rateType)) - 1;
      const totalPeriods = Math.floor(duration * getFactor(durationType) / getFactor(compoundType));

      let total = initial;
      let totalInvested = initial;

      let table = `<table><thead><tr>
        <th>æœŸæ•¸</th><th>æŠ•å…¥é‡‘é¡</th><th>åˆ©æ¯æ”¶ç›Š</th><th>ç¸½è³‡ç”¢</th>
      </tr></thead><tbody>`;

      for (let i = 1; i <= totalPeriods; i++) {
        const interest = total * ratePerCompound;
        total += interest + dca;
        totalInvested += dca;

        if (i <= 600 || i === totalPeriods) {
          table += `<tr>
            <td>${i}</td>
            <td>${format(dca)}</td>
            <td>${format(interest)}</td>
            <td>${format(total)}</td>
          </tr>`;
        }
      }

      table += "</tbody></table>";

      const interestEarned = total - totalInvested;
      const growthRate = (interestEarned / totalInvested) * 100;
      const btcAmount = total / (btcUSD * usdToTwd);

      const summary = `
        ğŸ§¾ ç¸½æŠ•å…¥é‡‘é¡ï¼š${format(totalInvested)} å…ƒ<br>
        ğŸ’° åˆ©æ¯æ”¶ç›Šï¼š${format(interestEarned)} å…ƒ<br>
        ğŸ“ˆ æˆé•·ç‡ï¼šç´„ ${growthRate.toFixed(2)}%<br>
        â‚¿ æ›ç®—ç‚º BTCï¼šç´„ ${btcAmount.toFixed(6)} é¡†ï¼ˆä»¥ 1 BTC = ${btcUSD} ç¾å…ƒï¼‰<br>
        âœ… æœ€çµ‚è³‡ç”¢ï¼šç´„ ${format(total)} å…ƒ
      `;

      document.getElementById("summary").innerHTML = summary;
      document.getElementById("table").innerHTML = table;
    }
  </script>

</body>
</html>